<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>ГИП</title>
    <link rel="stylesheet" href="{% static 'css/stylesheet.css'%}" type="text/css">
    <style>
        .form-textinput {width:100%;}
        .form-textinput:invalid {width:100%; border: outset #ff0000b2; border-radius: 5px}
        .form-textinput:valid {width:100%; border: outset #5dfc4eb2; border-radius: 5px}
        .form-dateinput {border: outset #ff0000b2; border-radius: 5px}
        .form-readonly {width:100%; border: outset grey; border-radius: 5px}
        .alert{color:red}
        a:active,
        a:hover,
        a {
            text-decoration: none;
            color: black;
        }
        .blue-button {
            background: #1abff2;
            border: none;
            border-radius: 2px;
            padding: 10px 15px;
            color: white;
        }
    </style>
</head>
<body class="container custom">
    <div class="container" style="max-width:99%">
        <div class="px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
            <h1 id="reest_num" class="display-4">Реестр несоответствий </h1>
        </div>
        <div class="py-5">
            <div class="row">
                <div class="col-12">
                    <form novalidate method="post" id="GIPform" onsubmit="return false;" enctype="multipart/form-data">
                        {% csrf_token %}
                        {% load verbose_names %}
                        <p id="gipID" hidden>{{ user.id }}</p>
                        <p hidden>
                            {{ form.reestrID }}
                        </p>
                        <p>
                            {% get_verbose_field_name "customer" %}<br />
                            {{ form.customer }}
                            {% if form.customer.errors %}
                                {% for error in form.customer.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "project_dogovor" %}<br />
                            {{ form.project_dogovor }}
                            {% if form.project_dogovor.errors %}
                                {% for error in form.project_dogovor.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "project_date_contract" %}<br />
                            {{ form.project_date_contract }}
                            {% if form.project_date_contract.errors %}
                                {% for error in form.project_date_contract.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "project_name" %}<br />
                            {{ form.project_name }}
                            {% if form.project_name.errors %}
                                {% for error in form.project_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "gip" %}<br />
                            {{ form.gip }}
                            {% if form.gip.errors %}
                                {% for error in form.gip.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "project_reviewer" %}<br />
                            {{ form.project_reviewer }}
                            {% if form.project_reviewer.errors %}
                                {% for error in form.project_reviewer.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "out_mail_num" %}<br />
                            {{ form.out_mail_num }}
                            {% if form.out_mail_num.errors %}
                                {% for error in form.out_mail_num.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "out_mail_date" %}<br />
                            {{ form.out_mail_date }}
                            {% if form.out_mail_date.errors %}
                                {% for error in form.out_mail_date.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "in_mail_num" %}<br />
                            {{ form.in_mail_num }}
                            {% if form.in_mail_num.errors %}
                                {% for error in form.in_mail_num.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "in_mail_date" %}<br />
                            {{ form.in_mail_date }}
                            {% if form.in_mail_date.errors %}
                                {% for error in form.in_mail_date.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "num_reestr" %}<br />
                            {{ form.num_reestr }}
                            {% if form.num_reestr.errors %}
                                {% for error in form.num_reestr.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "num_remark" %}<br />
                            {{ form.num_remark }}
                            {% if form.num_remark.errors %}
                                {% for error in form.num_remark.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "remark_v" %}<br />
                            {{ form.remark_v }}
                            {% if form.remark_v.errors %}
                                {% for error in form.remark_v.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "remark_name" %}<br />
                            {{ form.remark_name }}
                            {% if form.remark_name.errors %}
                                {% for error in form.remark_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "rational" %}<br />
                            {{ form.rational }}
                            {% if form.rational.errors %}
                                {% for error in form.rational.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "designation_name" %}<br />
                            {{ form.designation_name }}
                            {% if form.designation_name.errors %}
                                {% for error in form.designation_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "section_name" %}<br />
                            {{ form.section_name }}
                            {% if form.section_name.errors %}
                                {% for error in form.section_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            {% get_verbose_field_name "responsibleTrouble_name" %}<br />
                            {{ form.responsibleTrouble_name }}
                            {% if form.responsibleTrouble_name.errors %}
                                {% for error in form.responsibleTrouble_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            Дополнительные файлы<br/>
                            {{ form.add_files }}
                            {% if form.add_files.errors %}
                                {% for error in form.add_files.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            Наименование документов<br/>
                            {{ form.file_name }}
                            {% if form.file_name.errors %}
                                {% for error in form.file_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p>
                            Комментарий к файлам<br/>
                            {{ form.file_comment }}
                            {% if form.file_comment.errors %}
                                {% for error in form.file_comment.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="execFailName" hidden>
                            {% get_verbose_field_name "executor_fail_name" %}<br />
                            {{ form.executor_fail_name }}
                            {% if form.executor_fail_name.errors %}
                                {% for error in form.executor_fail_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="execName" hidden>
                            {% get_verbose_field_name "executor_name" %}<br />
                            {{ form.executor_name }}
                            {% if form.executor_name.errors %}
                                {% for error in form.executor_name.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="answerDate" hidden>
                            {% get_verbose_field_name "answer_date_plan" %}<br />
                            {{ form.answer_date_plan }}
                            {% if form.answer_date_plan.errors %}
                                {% for error in form.answer_date_plan.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="deadlineDate" hidden>
                            {% get_verbose_field_name "answer_deadline_correct_plan" %}<br />
                            {{ form.answer_deadline_correct_plan }}
                            {% if form.answer_deadline_correct_plan.errors %}
                                {% for error in form.answer_deadline_correct_plan.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="laborCosts" hidden>
                            {% get_verbose_field_name "labor_costs_plan" %}<br />
                            {{ form.labor_costs_plan }}
                            {% if form.labor_costs_plan.errors %}
                                {% for error in form.labor_costs_plan.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="comments" hidden>
                            {% get_verbose_field_name "comment" %}<br />
                            {{ form.comment }}
                            {% if form.comment.errors %}
                                {% for error in form.comment.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="answerRemark" hidden>
                            {% get_verbose_field_name "answer_remark" %}<br />
                            {{ form.answer_remark }}
                            {% if form.answer_remark.errors %}
                                {% for error in form.answer_remark.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <fieldset id="imp1" hidden>
                            <legend>Корректировка документации (свой раздел, глава, том, книга, др. док.)</legend>
                            <div>
                                <input type="radio" id="imp1true" name="importance1" value="True"/>
                                <label for="imp1true">Требуется</label>
                            </div>
                            <div>
                                <input type="radio" id="imp1false" name="importance1" value="False"/>
                                <label for="imp1false">Не требуется</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp2">
                            <legend>Корректировка смежных разделов (глав, томов, др. док.)</legend>
                            <div>
                                <input type="radio" id="imp2true" name="importance2" value="True"/>
                                <label for="imp2true">Требуется</label>
                            </div>
                            <div>
                                <input type="radio" id="imp2false" name="importance2" value="False"/>
                                <label for="imp2false">Не требуется</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp3">
                            <legend>Выдача задания смежным подразделениям (без учёта ОКиВД) и (или) получение исходных данных от них</legend>
                            <div>
                                <input type="radio" id="imp3true" name="importance3" value="True"/>
                                <label for="imp3true">Требуется</label>
                            </div>
                            <div>
                                <input type="radio" id="imp3false" name="importance3" value="False"/>
                                <label for="imp3false">Не требуется</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp4">
                            <legend>Корректировка принятых проектных решений</legend>
                            <div>
                                <input type="radio" id="imp4true" name="importance4" value="True"/>
                                <label for="imp4true">Требуется</label>
                            </div>
                            <div>
                                <input type="radio" id="imp4false" name="importance4" value="False"/>
                                <label for="imp4false">Не требуется</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp5">
                            <legend>Получение дополнительных исходных данных от Заказчика</legend>
                            <div>
                                <input type="radio" id="imp5true" name="importance5" value="True"/>
                                <label for="imp5true">Требуется</label>
                            </div>
                            <div>
                                <input type="radio" id="imp5false" name="importance5" value="False"/>
                                <label for="imp5false">Не требуется</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp6">
                            <legend>Корректировка принятых проектных решений требуется по причине:</legend>
                            <div>
                                <input type="radio" id="imp6true" name="importance6" value="True"/>
                                <label for="imp6true">Вина/Инициатива Заказчика</label>
                            </div>
                            <div>
                                <input type="radio" id="imp6false" name="importance6" value="False"/>
                                <label for="imp6false">Вина проектировщика</label>
                            </div>
                        </fieldset>
                        <fieldset hidden id="imp7">
                            <legend>Нарушены требования нормативно-технических документов:</legend>
                            <div>
                                <input type="radio" id="imp7true" name="importance7" value="True"/>
                                <label for="imp7true">Да</label>
                            </div>
                            <div>
                                <input type="radio" id="imp7false" name="importance7" value="False"/>
                                <label for="imp7false">Нет</label>
                            </div>
                        </fieldset>
                        <p id="totalImportance" hidden>
                            {% get_verbose_field_name "total_importance" %}<br />
                            {{ form.total_importance }}
                            {% if form.total_importance.errors %}
                                {% for error in form.total_importance.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <p id="rootCause" hidden>
                            {% get_verbose_field_name "root_cause_list" %}<br />
                            <select id="causes" class="form-textinput">
                                <option value=""></option>
                                <optgroup label="1. Проектная документация">
                                    <optgroup label="- 1.1. Несоответствие оформления выпускаемой документации установленным
                                    нормам и правилам (ГОСТ, СПДС, ЕСКД, СТО и т.д.) и правилам офрмления, оговоренным и принятым с Заказчиком">
                                        <option value="1.1.1.">-- 1.1.1. Несоответствие оформления выпускаемой документации
                                        (направляемой Заказчику, в ГГЭ и др.) установленным нормам и правилам (ГОСТ, СПДС,
                                            ЕСКД, СТО и т.д.) по вине сотрудников ОКиВД</option>
                                        <option value="1.1.2.">-- 1.1.2. Несоответствие оформления выпускаемой документации
                                        установленным нормам и правилам (ГОСТ, СПДС, ЕСКД, СТО т.д.) по вине нормоконтролёров</option>
                                        <option value="1.1.3.">-- 1.1.3. Несоответствие оформления выпускаемой документации
                                        установленным нормам и правилам (ГОСТ, СПДС, ЕСКД, СТО т.д.) и правилам оформления,
                                         оговоренным и принятым с заказчиком по вине исполнителей</option>
                                    </optgroup>
                                    <option value="1.2.1.">- 1.2. Некорректное использование исполнителями нормативных
                                        документов (НД) или некорректная ссылка исполнителя на НД при подготовке документации
                                    </option>
                                    <optgroup label="- 1.3. Некорректное применение установленных требований со стороны
                                    Рецензента (Заказчика, ГГЭ и др.)">
                                        <option value="1.3.1.">-- 1.3.1. Некорректная ссылка на НД при подготовке замечания
                                            со стороны Рецензента (Заказчика, ГГЭ и др.)</option>
                                        <option value="1.3.2.">-- 1.3.2. Некорректная ссылка на невыполнение Исполнителем
                                            НД со стороны Рецензента (Заказчика, ГГЭ и др.), в случае "невнимательного
                                            (неполного) прочтения документации"</option>
                                    </optgroup>
                                </optgroup>
                                <optgroup label="2. Оборудование">
                                    <option value="2.1.1.">- 2.1. Использование при проведении инженерно-изыскательских,
                                        научно-исследовательских работ и подготовки проектной документации оборудования
                                        и программного обеспечения, несоответствующего требованиям ТЗ или состояние и
                                        характеристики которых не позволяют производить качественные исследования и выпуск
                                        проектной документации</option>
                                    <option value="2.2.1.">- 2.2. Неправомерное требование со стороны Рецензента (Заказчика,
                                        ГГЭ и др.) использовать программное обеспечение, приборы и сертифицированные
                                        лаборатории, не указанные в ТЗ</option>
                                </optgroup>
                                <optgroup label="3. Персонал">
                                    <optgroup label="- 3.1. Нарушение персоналом (исполнителями) требований Договора, ЗНП
                                    (ТЗ) или других НД (использование устаревших НД)">
                                        <option value="3.1.1.">-- 3.1.1. Не знание (не выполнение) требований Договора, ЗНП
                                        (ТЗ, протоколов, решений, писем) и других НД, использование устаревших НД</option>
                                        <option value="3.1.2.">-- 3.1.2. Не предоставление необходимых документов (разрешений,
                                        сертификатов, договоров, протоколов, отчётов, актов, аттестатов, картографии,
                                            справок, фото-видео материалов и др.)</option>
                                        <option value="3.1.3.">-- 3.1.3. Отсутствие необходимых расчётов (измерений,
                                            испытаний) или допущение ошибки при их выполнении (в случае их обязательного
                                            выполнения)</option>
                                        <option value="3.1.4.">-- 3.1.4. Технические ошибки из-за невнимательности</option>
                                        <option value="3.1.5.">-- 3.1.5. Исполнителем, допустившим несоответствие, является субподрядчик</option>
                                        <option value="3.1.6.">-- 3.1.6. Исполнитель, допустивший несоответствие, уволился из организации</option>
                                    </optgroup>
                                    <optgroup label="- 3.2. Недостаточное взаимодействие между подразделениями при проектировании,
                                    в части предоставления (получения) необходимых и достаточных исходных данных в
                                    установленный графиком срок">
                                        <option value="3.2.1.">-- 3.2.1. Нарушение сроков выдачи задания (исходных данных)
                                            смежным подразделениям (или получение от них)</option>
                                        <option value="3.2.2.">-- 3.2.2. Нарушение сроков выполнения работ исполнителями,
                                        влияющее на сроки работ смежных подразделений</option>
                                        <option value="3.2.3.">-- 3.2.3. Предоставление недостаточных (некорректных) исходных
                                            данных смежным подразделениям</option>
                                    </optgroup>
                                    <optgroup label="- 3.3. Недостаточное количество персонала (исполнителей) для выполнения работ">
                                        <option value="3.3.1.">-- 3.3.1. Нарушение сроков выдачи задания (исходных данных)
                                            смежным подразделениям (или получение от них) в следствии недостаточного
                                            количества исполнителей</option>
                                        <option value="3.3.2.">-- 3.3.2. Нарушение сроков выполнения работ исполнителями,
                                            влияющее на сроки работ смежных подразделений в следствии недостаточного
                                            количества исполнителей</option>
                                        <option value="3.3.3.">-- 3.3.3. Нарушение сроков выполнения работ исполнителями,
                                            влияющее на сроки выпуска проекта/документации в следствии недостаточного
                                            количества исполнителей</option>
                                    </optgroup>
                                </optgroup>
                                <optgroup label="4. Управление">
                                    <optgroup label="- 4.1. Недостаточный уровень планирования работ по проекту со стороны
                                    ГИП и руководителей подразделений, связанный с ошибками в планировании (в определении
                                    приоритетности выполнения работ по Проекту; в распределении ресурсов внутри подразделения по Проектам)">
                                        <option value="4.1.1.">-- 4.1.1. Нарушение сроков выпуска проектов, связанное с
                                            ошибками планирования ГИП или Руководителей подразедений</option>
                                        <option value="4.1.2.">-- 4.1.2. Нарушение сроков выпуска проектов, связанное с
                                            ошибками планирования ГИП или Руководителей подразедений (при изменении приоритетов
                                            в очерёдности проектирования со стороны Руководства Общества, Холдинга, Заказчика)</option>
                                    </optgroup>
                                    <optgroup label="- 4.2. Недостаточный уровень планирования выполнения договоров со стороны
                                     планово-производственного отдела (ППО), связанный с ошибками в планировании (в
                                     определении приоритетности выполнения Проектов; в распределении ресурсов производственного
                                     блока по Проектам">
                                        <option value="4.2.1.">-- 4.2.1. Нарушение сроков выпуска проектов, связанное с ошибками
                                         планирования Руководства производственного блока или ППО</option>
                                        <option value="4.2.2.">-- 4.2.2. Нарушение сроков выпуска проектов, связанное с ошибками
                                         планирования Руководства производственного блока или ППО (при изменении приоритетов
                                        в очерёдности проектирования со стороны Руководства Общества, Холдинга, Заказчика)</option>
                                    </optgroup>
                                    <option value="4.3.1.">- 4.3. Слабый контроль (проверка) выпускаемой документации на
                                        предмет её соответствия требованиям Договора, ЗПН (ТЗ) или других НД со стороны
                                        ГИП или руководителей подразделений</option>
                                    <option value="4.4.1.">- 4.4. Изменение Заказчиком ЗНП (ТЗ) в процессе выполнения работ
                                     (дополнительные требования Заказчика на различных стадиях проектирования)</option>
                                    <optgroup label="- 4.5. Несвоевременное предоставление (не предоставление) Заказчиком
                                    исходных данных (ИД), правоустанавливающих и учредительных документов (истечение их
                                    срока действия">
                                        <option value="4.5.1.">-- 4.5.1. Несвоевременное предоставление (не предоставление)
                                        Заказчиком ИД (предоставление некорректных ИД)</option>
                                        <option value="4.5.2.">-- 4.5.2. Непредставление правоустанавливающих документов со
                                        стороны Заказчика (истечение их срока действия) для ведения работ по договору</option>
                                    </optgroup>
                                    <option value="4.6.1.">- 4.6. Изменение сроков выпуска проектов, связанные с изменением
                                     приоиртетов Руководства холдинга (Заказчика) в очерёдности проектирования</option>
                                </optgroup>
                                <optgroup label="5. Методы/технология">
                                    <option value="5.1.1.">- 5.1. Неиспользование исполнителями при проведении работ по договору
                                     передовых современных технологий проектирования (3D-проектирования)</option>
                                    <optgroup label="- 5.2. Неиспользование исполнителями вспомогательных инструментов и
                                    программ для проверки актуальности НД">
                                        <option value="5.2.1.">-- 5.2.1. Неиспользование исполнителями вспомогательных инструментов и
                                    программ для проверки актуальности НД (в т.ч. информационно-справочной системы "Кодекс-Техэксперт")</option>
                                    </optgroup>
                                    <optgroup label="- 5.3. Нарушение методологии (процедур) нормоконтроля качества,
                                    установленных в организации">
                                        <option value="5.3.1.">-- 5.3.1. Формальное исполнение функций нормоконтроля со стороны
                                         Руководства производственного блока или ГИПов</option>
                                        <option value="5.3.2.">-- 5.3.2. Формальное исполнение функций нормоконтроля со стороны
                                         Руководителей подразделений или исполнителей</option>
                                    </optgroup>
                                </optgroup>
                                <option value="6.">6. Материал, сырьё, комплектующие</option>
                                <option value="7.">7. Окружающая среда</option>
                              </select>
                            {{ form.root_cause_list }}
                            {% if form.root_cause_list.errors %}
                                {% for error in form.root_cause_list.errors %}
                                    <li class="alert alert-danger"> {{error}} </li>
                                {% endfor %}
                            {% endif %}
                        </p>
                        <script>
                            let dogovor = document.getElementById("id_project_dogovor").value;
                            let reestr = document.getElementById("id_num_reestr").value;
                            let s = "Реестр выявленных несоответствий № ";
                            s = s.concat(dogovor.substring(4,9));
                            s = s.concat(reestr);
                            document.getElementById("reest_num").innerHTML = s;

                            const project_date = document.querySelectorAll('select[class="form-dateinput"]');
                            for(const date of project_date){
                                if (date.value!="") {
                                    date.style.borderColor="#5dfc4eb2";
                                }
                                date.addEventListener('change', select);
                                date.setAttribute("required", "");
                            }

                            document.getElementById("remark_v").value = 0;
                            function select(e) {
                                if (this.value=="") {
                                    this.style.borderColor="#ff0000b2";
                                } else {
                                    this.style.borderColor="#5dfc4eb2";
                                }
                            }

                            document.getElementById("id_responsibleTrouble_name").addEventListener('change', responsibleSelect);
                            if (document.getElementById("id_responsibleTrouble_name").value == document.getElementById("gipID").innerHTML) {
                                document.getElementById("execFailName").removeAttribute("hidden");
                                document.getElementById("execName").removeAttribute("hidden");

                                document.getElementById("id_executor_name").addEventListener('change', executorSelect);
                                if (document.getElementById("id_executor_name").value == document.getElementById("gipID").innerHTML) {
                                    document.getElementById("answerDate").removeAttribute("hidden");
                                    document.getElementById("deadlineDate").removeAttribute("hidden");
                                    document.getElementById("laborCosts").removeAttribute("hidden");
                                    document.getElementById("comments").removeAttribute("hidden");
                                    document.getElementById("answerRemark").removeAttribute("hidden");
                                    document.getElementById("imp1").removeAttribute("hidden");
                                    document.getElementById("totalImportance").removeAttribute("hidden");
                                    document.getElementById("rootCause").removeAttribute("hidden");

                                    document.getElementById("labor_costs_plan").setAttribute("required", "");
                                    document.getElementById("comment").setAttribute("required", "");
                                    document.getElementById("causes").setAttribute("required", "");


                                }
                            }

                            function responsibleSelect(e) {
                                if (this.value == document.getElementById("gipID").innerHTML) {
                                    document.getElementById("execFailName").removeAttribute("hidden");
                                    document.getElementById("execName").removeAttribute("hidden");
                                    document.getElementById("id_executor_fail_name").setAttribute("required","");
                                    document.getElementById("id_executor_name").setAttribute("required","");
                                    document.getElementById("id_executor_name").addEventListener('change', executorSelect);
                                }
                                else {
                                    document.getElementById("id_executor_fail_name").removeAttribute("required");
                                    document.getElementById("id_executor_name").removeAttribute("required");
                                    document.getElementById("execFailName").setAttribute("hidden", "");
                                    document.getElementById("execName").setAttribute("hidden", "");
                                }
                            }

                            function executorSelect(e) {
                                if (this.value == document.getElementById("gipID").innerHTML) {
                                    document.getElementById("answerDate").removeAttribute("hidden");
                                    document.getElementById("deadlineDate").removeAttribute("hidden");
                                    document.getElementById("laborCosts").removeAttribute("hidden");
                                    document.getElementById("comments").removeAttribute("hidden");
                                    document.getElementById("answerRemark").removeAttribute("hidden");
                                    document.getElementById("imp1").removeAttribute("hidden");
                                    document.getElementById("totalImportance").removeAttribute("hidden");
                                    document.getElementById("rootCause").removeAttribute("hidden");

                                    document.getElementById("labor_costs_plan").setAttribute("required", "");
                                    document.getElementById("comment").setAttribute("required", "");
                                    document.getElementById("causes").setAttribute("required", "");
                                }
                                else {
                                    document.getElementById("answerDate").setAttribute("hidden", "");
                                    document.getElementById("deadlineDate").setAttribute("hidden", "");
                                    document.getElementById("laborCosts").setAttribute("hidden", "");
                                    document.getElementById("comments").setAttribute("hidden", "");
                                    document.getElementById("answerRemark").setAttribute("hidden", "");
                                    document.getElementById("imp1").setAttribute("hidden", "");
                                    document.getElementById("imp2").setAttribute("hidden", "");
                                    document.getElementById("imp3").setAttribute("hidden", "");
                                    document.getElementById("imp4").setAttribute("hidden", "");
                                    document.getElementById("imp5").setAttribute("hidden", "");
                                    document.getElementById("imp6").setAttribute("hidden", "");
                                    document.getElementById("imp7").setAttribute("hidden", "");
                                    document.getElementById("totalImportance").setAttribute("hidden", "");
                                    document.getElementById("rootCause").setAttribute("hidden", "");
                                }
                            }

                            if (document.getElementById("root_cause").value != "") {
                                document.getElementById("causes").value = document.getElementById("root_cause").value;
                            }

                            let imp = [-1, -1, -1, -1, -1];
                            let guilt = -1;
                            let doc = -1;
                            const radioButtons1 = document.querySelectorAll('input[name="importance1"]');
                            const radioButtons2 = document.querySelectorAll('input[name="importance2"]');
                            const radioButtons3 = document.querySelectorAll('input[name="importance3"]');
                            const radioButtons4 = document.querySelectorAll('input[name="importance4"]');
                            const radioButtons5 = document.querySelectorAll('input[name="importance5"]');
                            const radioButtons6 = document.querySelectorAll('input[name="importance6"]');
                            const radioButtons7 = document.querySelectorAll('input[name="importance7"]');
                            for(const radioButton of radioButtons1){
                                radioButton.addEventListener('change', select1);
                            }
                            for(const radioButton of radioButtons2){
                                radioButton.addEventListener('change', select2);
                            }
                            for(const radioButton of radioButtons3){
                                radioButton.addEventListener('change', select3);
                            }
                            for(const radioButton of radioButtons4){
                                radioButton.addEventListener('change', select4);
                            }
                            for(const radioButton of radioButtons5){
                                radioButton.addEventListener('change', select5);
                            }
                            for(const radioButton of radioButtons6){
                                radioButton.addEventListener('change', select6);
                            }
                            for(const radioButton of radioButtons7){
                                radioButton.addEventListener('change', select7);
                            }

                            if (document.getElementById("total_imp").value != "") {
                                document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                            }

                            document.getElementById("causes").addEventListener('change', selectCause);
                            function selectCause(e) {
                                if (this.value != "") {
                                    document.getElementById("root_cause").value = this.value;
                                }
                            }

                            function select1(e) {
                                if (this.checked) {
                                    if (this.value=="True") {
                                        for (radiobutton of radioButtons2) {
                                            radiobutton.checked = false;
                                        }
                                        document.getElementById("imp2").removeAttribute("hidden");
                                        document.getElementById("total_imp").value = '';
                                        document.getElementById("total_imp").style.borderColor="#ff0000b2"
                                        imp[0] = 1;
                                        if (guilt == -1 && doc < 1) {
                                            answer();
                                        }
                                    }
                                    else {
                                        document.getElementById("imp2").setAttribute("hidden", "");
                                        document.getElementById("imp3").setAttribute("hidden", "");
                                        document.getElementById("imp4").setAttribute("hidden", "");
                                        document.getElementById("imp5").setAttribute("hidden", "");
                                        document.getElementById("imp6").setAttribute("hidden", "");
                                        document.getElementById("imp7").setAttribute("hidden", "");
                                        imp[1] = -1;
                                        imp[2] = -1;
                                        imp[3] = -1;
                                        imp[4] = -1;
                                        guilt = -1;
                                        doc = -1;
                                        document.getElementById("total_imp").value = 'Несущественное';
                                        document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                        imp[0] = 0;
                                    }
                                }

                            }
                            function select2(e) {
                                if (this.checked) {
                                    for (radiobutton of radioButtons3) {
                                        radiobutton.checked = false;
                                    }
                                    document.getElementById("imp3").removeAttribute("hidden");
                                    if (this.value=="True") {
                                        imp[1] = 1;
                                    }
                                    else {
                                        imp[1] = 0;
                                    }
                                    if (guilt == -1 && doc < 1) {
                                        answer();
                                    }
                                }
                            }
                            function select3(e) {
                                if (this.checked) {
                                    for (radiobutton of radioButtons4) {
                                        radiobutton.checked = false;
                                    }
                                    document.getElementById("imp4").removeAttribute("hidden");
                                    if (this.value=="True") {
                                        imp[2] = 1;
                                    }
                                    else {
                                        imp[2] = 0;
                                    }
                                    if (guilt == -1 && doc < 1) {
                                        answer();
                                    }
                                }
                            }
                            function select4(e) {
                                if (this.checked) {
                                    for (radiobutton of radioButtons5) {
                                        radiobutton.checked = false;
                                    }
                                    document.getElementById("imp5").removeAttribute("hidden");
                                    if (this.value=="True") {
                                        imp[3] = 1;
                                        if (imp[4] >= 0) {
                                            for (radiobutton of radioButtons6) {
                                                radiobutton.checked = false;
                                            }
                                            document.getElementById("imp7").setAttribute("hidden", "");
                                            document.getElementById("imp6").removeAttribute("hidden");
                                            doc = -1;
                                        }
                                    }
                                    else {
                                        imp[3] = 0;
                                        if (imp[4] >= 0) {
                                            for (radiobutton of radioButtons7) {
                                                radiobutton.checked = false;
                                            }
                                            document.getElementById("imp6").setAttribute("hidden", "");
                                            document.getElementById("imp7").removeAttribute("hidden");
                                            guilt = -1
                                        }
                                    }
                                    if (guilt == -1 && doc < 1) {
                                        answer();
                                    }
                                }
                            }
                            function select5(e) {
                                if (this.checked) {
                                    if (this.value=="True") {
                                        imp[4] = 1;
                                    }
                                    else {
                                        imp[4] = 0;
                                    }
                                    if (imp[3] == 1) {
                                        for (radiobutton of radioButtons6) {
                                            radiobutton.checked = false;
                                        }
                                        document.getElementById("imp6").removeAttribute("hidden");
                                        document.getElementById("imp7").setAttribute("hidden", "");
                                        doc = -1;
                                    }
                                    else {
                                        for (radiobutton of radioButtons7) {
                                            radiobutton.checked = false;
                                        }
                                        document.getElementById("imp7").removeAttribute("hidden");
                                        document.getElementById("imp6").setAttribute("hidden", "");
                                        guilt = -1;
                                    }
                                    if (guilt == -1 && doc < 1) {
                                        answer();
                                    }
                                }
                            }
                            function select6(e) {
                                if (this.checked) {
                                    if (this.value == "True") {
                                        document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                        document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                        guilt = 1;
                                    }
                                    else {
                                        document.getElementById("total_imp").value = 'Существенное';
                                        document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                        guilt = 0;
                                    }
                                }
                            }
                            function select7(e) {
                                if (this.checked) {
                                    if (this.value == "True") {
                                        doc = 1;
                                        document.getElementById("total_imp").value = 'Существенное';
                                        document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                    }
                                    else {
                                        doc = 0;
                                        answer();
                                    }
                                }
                            }
                            function answer() {
                                if (imp[0] == 1) {
                                    if (imp[1] == 1) {
                                        if (imp[2] == 1) {
                                            if (imp[3] == 1) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Существенное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                            else if (imp[3] == 0) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Несущественное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                        }
                                        else if (imp[2] == 0) {
                                            if (imp[3] == 1) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Существенное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                            else if (imp[3] == 0) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Несущественное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                        }
                                    }
                                    else if (imp[1] == 0) {
                                        if (imp[2] == 1) {
                                            if (imp[3] == 1) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Существенное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                            else if (imp[3] == 0) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Несущественное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                        }
                                        else if (imp[2] == 0) {
                                            if (imp[3] == 1) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Существенное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                            else if (imp[3] == 0) {
                                                if (imp[4] == 1) {
                                                    document.getElementById("total_imp").value = 'В компетенции Заказчика';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                                else if (imp[4] == 0) {
                                                    document.getElementById("total_imp").value = 'Несущественное';
                                                    document.getElementById("total_imp").style.borderColor="#5dfc4eb2"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        </script>
                    </form>
                    <button class="blue-button" onclick="document.forms['GIPform'].submit();">Отправить форму</button>
                    <button class="blue-button"><a href="{% url 'home'%}" style="color:white">Вернуться в профиль</a></button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>